# vim:ft=sh

# Sentinel value to know we've loaded this file
export PROFILE_LOADED=1

# Use NeoVim if we have it
if which nvim > /dev/null; then
  VISUAL=nvim
else
  VISUAL=vim
fi
EDITOR=$VISUAL
export EDITOR VISUAL

# Tell ls to use colors by default (only works on Mac/BSD)
export CLICOLOR=1

# VirtualEnv {{{
# Centralized location for new virtual environments
export VIRTUAL_ENV_DEFAULT_DIR=$HOME/.local/virtualenv
# }}}

if which fzf > /dev/null; then
  # If available, we use git to list files from the root directory (not from the
  # current directory as in other fzf cases). Otherwise, fallback to ag
  export FZF_DEFAULT_COMMAND='(git ls-files -co --exclude-standard $(git rev-parse --show-toplevel) || ag -l -g "") 2> /dev/null'
  export FZF_DEFAULT_OPTS="--black --extended"
  export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
fi

# Locally-installed packages belong in path
if ! echo ":$PATH:" | grep -q ":$HOME/.local/bin:"; then
  export PATH="$HOME/.local/bin:$PATH"
fi

# Store config files in default location
export XDG_CONFIG_HOME=$HOME/.config

# OS overrides
OS=`uname`
if [ "$OS" = "Darwin" ]; then
  if [ -f $HOME/.profile.osx ]; then
    . $HOME/.profile.osx
  fi
elif [ "$OS" = "Linux" ]; then
  if [ -f $HOME/.profile.linux ]; then
    . $HOME/.profile.linux
  fi
fi

# Local overrides if present
if [ -f $HOME/.profile.local ]; then
  . $HOME/.profile.local
fi
